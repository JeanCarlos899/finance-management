{% extends "financeapp/index.html" %}
{% load static %}
{% block title %}Gestor de Finanças - Início{% endblock title %}
{% block contentnav %}
<form action="{% url 'financeapp:dashboard' %}" method="GET">
    <div class="input-group input-group-sm">
      <div class="input-group-prepend">
        <span class="input-group-text">De</span>
      </div>
      <input type="date" class="form-control" aria-label="De" name="start_date" value="{{ start_date }}" required>
      <div class="input-group-prepend">
        <span class="input-group-text">Até</span>
      </div>
      <input type="date" class="form-control" aria-label="Até" name="end_date" value="{{ end_date }}" required>
      <div class="input-group-append">
        <button type="submit" class="btn btn-primary btn-block">Filtrar</button>
      </div>
    </div>
</form>
{% endblock contentnav %}
{% block content %}
<div class="row dashboard-content">
  <div class="col">

    <div class="row d-flex mt-3">
      <div class="col info-box bg-white mr-2">
        <span class="info-box-icon bg-warning"><i class="fas fa-landmark text-white-1" style="color: white;"></i></span>
        <div class="info-box-content">
          <span class="info-box-text">Saldo</span>
          <span class="info-box-number">R$ {{balance}}</span>
        </div>
      </div>
      <div class="col info-box bg-white mr-2">
        <span class="info-box-icon bg-success"><i class="fas fa-dollar-sign"></i></i></span>
        <div class="info-box-content">
          <span class="info-box-text">Receita</span>
          <span class="info-box-number">R$ {{sum_earnings}}</span>
        </div>
      </div>
      <div class="col info-box bg-white">
        <span class="info-box-icon bg-danger"><i class="fas fa-hand-holding-usd"></i></span>
        <div class="info-box-content">
          <span class="info-box-text">Despesas</span>
          <span class="info-box-number">R$ {{sum_expenses}}</span>
        </div>
      </div>
    </div>
    <div class="row d-flex">
      <div class="col info-box bg-white mr-2" style="height: 30vh;">
        <canvas id="barChartCol1"></canvas>
      </div>
      <div class="col info-box bg-white" style="height: 30vh;">
        <canvas id="myChart"></canvas>
      </div>
    </div>
    <div class="row d-flex">
      <div class="col info-box bg-white mr-2 flex-grow-1" style="height: 30vh;">

      </div>
      <div class="col-2 info-box bg-white mr-2" style="height: 30vh;">
        <canvas id="doughnutChart" class="chart"></canvas>
      </div>
      <div class="col-2 info-box bg-white" style="height: 30vh;">
        <canvas id="doughnutChart2" class="chart"></canvas>
      </div>
    </div>
  </div>
</div>
{% endblock content %}
{% block scripts %}
<script>
  const labels = JSON.parse('{{ labels|escapejs }}');
  const earningSumList = JSON.parse('{{ earnings_sum_list|escapejs }}');
  const expenseSumList = JSON.parse('{{ expenses_sum_list|escapejs }}');
  const earningSum = JSON.parse('{{ sum_earnings|escapejs }}');
  const expenseSum = JSON.parse('{{ sum_expenses|escapejs }}');
</script>
<script src="{% static 'js/dashboard.js' %}"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
{% endblock scripts %}